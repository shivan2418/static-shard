# static-shard Demo

A sample e-commerce product search demo showing how static-shard enables efficient querying of large datasets on a static website.

## Setup

1. **Generate sample data** (5,000 products):

```bash
node generate-data.js
```

2. **Build the chunks and client**:

```bash
npx static-shard build products.json --output ./data --chunk-size 50kb --index "category,brand,inStock"
```

3. **Serve the demo** (needs a local server for ES modules):

```bash
# Using Python
python3 -m http.server 8080

# Using Node.js
npx serve .

# Using PHP
php -S localhost:8080
```

4. **Open in browser**:

```
http://localhost:8080
```

## What to Try

- **Filter by category** - Notice only relevant chunks are loaded
- **Filter by price range** - Uses range pruning to skip chunks
- **Combine filters** - See how indices narrow down candidate chunks
- **Sort results** - In-memory sorting after loading

## How It Works

The demo queries 5,000 products stored across multiple ~50KB chunks. When you search:

1. The client loads `manifest.json` (contains indices and chunk metadata)
2. Based on your filters, it determines which chunks might contain matches
3. Only those chunks are fetched (not all of them!)
4. Results are filtered in-memory and displayed

For example, filtering by `category = "Electronics"` might only load 3 of 20 chunks because the index knows exactly which chunks contain electronics products.

## Files

```
demo/
├── index.html           # Demo UI
├── generate-data.js     # Generates sample products
├── products.json        # Generated sample data (after running generate-data.js)
├── data/                # Generated by static-shard build
│   ├── manifest.json
│   ├── client.ts
│   └── chunks/
│       ├── 0.json
│       ├── 1.json
│       └── ...
└── README.md
```
